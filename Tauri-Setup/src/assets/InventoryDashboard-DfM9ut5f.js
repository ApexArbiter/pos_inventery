import{c as oe,r as l,e as g,d as c,P as p,B as te,A as M,k as Ie,j as e,m as se}from"./index-CZ0aMDF1.js";import{F as Re,R as Ae,B as Pe,C as Le,X as Me,Y as Ee,T as _e,a as Fe}from"./BarChart-6q9DDtan.js";import{P as re}from"./plus-Cz38fBgY.js";import{S as Be}from"./search-DZxNIAtT.js";import{D as Oe}from"./download-D0wQykv5.js";import{C as ae}from"./clock-Drj3gQ-V.js";import{M as $e}from"./minus-B_ps8ois.js";import{S as Ve}from"./square-pen-BUDrwwgU.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=oe("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=oe("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]),Xe=()=>{var X,Y,G,J,W;const[s,E]=l.useState([]),[N,de]=l.useState(""),[w,ne]=l.useState("all"),[ie,v]=l.useState(!1),[_,F]=l.useState(!1),[a,xe]=l.useState({totalProducts:0,totalValue:0,lowStockItems:0,outOfStockItems:0,recentMovements:[],topProducts:[]}),[m,ue]=l.useState(!1),[x,C]=l.useState([]),[ge,I]=l.useState(!1),[o,B]=l.useState(null),[h,me]=l.useState("add"),[y,O]=l.useState(""),[R,$]=l.useState(""),[he,V]=l.useState(!1),[T,ye]=l.useState([]),[pe,A]=l.useState(!1),[k,U]=l.useState(""),[P,H]=l.useState("");l.useEffect(()=>{S(),D()},[]),l.useEffect(()=>{const t=setTimeout(()=>{ke()},300);return()=>clearTimeout(t)},[N,w]);const S=async()=>{try{v(!0);const t=await g.get("/inventory/levels");t.data.success&&E(t.data.data||[])}catch(t){console.error("Failed to load inventory:",t),c.error("Failed to load inventory data")}finally{v(!1)}},D=async()=>{try{const[t,r,n]=await Promise.all([g.get("/inventory/value"),g.get("/inventory/movements/recent"),g.get("/inventory/reports/top-products")]);xe({totalProducts:(s==null?void 0:s.length)||0,totalValue:t.data.totalValue||0,lowStockItems:(s==null?void 0:s.filter(i=>i.isLowStock).length)||0,outOfStockItems:(s==null?void 0:s.filter(i=>i.isOutOfStock).length)||0,recentMovements:r.data.movements||[],topProducts:n.data.products||[]})}catch(t){console.error("Failed to load stats:",t)}},ke=async()=>{try{v(!0);const t={};N.trim()&&(t.search=N.trim()),w!=="all"&&(t.status=w);const r=await g.get("/inventory/levels",{params:t});r.data.success&&E(r.data.data||[])}catch(t){console.error("Filter error:",t),c.error("Failed to filter inventory")}finally{v(!1)}},be=async()=>{F(!0),await Promise.all([S(),D()]),F(!1),c.success("Data refreshed")},z=t=>t.isOutOfStock?{status:"Out of Stock",color:"text-red-600 bg-red-100",icon:M}:t.isLowStock?{status:"Low Stock",color:"text-orange-600 bg-orange-100",icon:M}:{status:"In Stock",color:"text-green-600 bg-green-100",icon:p},je=t=>{switch(t){case"purchase":case"adjustment_increase":return e.jsx(ce,{className:"w-4 h-4 text-green-600"});case"sale":case"adjustment_decrease":return e.jsx(le,{className:"w-4 h-4 text-red-600"});case"transfer_in":return e.jsx(ce,{className:"w-4 h-4 text-blue-600"});case"transfer_out":return e.jsx(le,{className:"w-4 h-4 text-blue-600"});default:return e.jsx(se,{className:"w-4 h-4 text-gray-600"})}},L=async t=>{if(x.length===0){c.error("Please select items first");return}switch(t){case"export":fe();break;case"update_reorder":break;case"mark_counted":break;default:c.error("Action not implemented yet")}},fe=()=>{const t=(s==null?void 0:s.filter(d=>x.includes(d._id)))||[],r=[["Product Name","Barcode","Current Stock","Reorder Point","Value","Status"],...t.map(d=>{var b,j,f;return[((b=d.productDetails)==null?void 0:b.productName)||"N/A",((j=d.productDetails)==null?void 0:j.barcode)||"N/A",d.currentStock,d.reorderPoint,`Rs.${(d.currentStock*(((f=d.productDetails)==null?void 0:f.costPrice)||0)).toFixed(2)}`,z(d).status]})].map(d=>d.join(",")).join(`
`),n=new Blob([r],{type:"text/csv"}),i=window.URL.createObjectURL(n),u=document.createElement("a");u.href=i,u.download=`inventory-export-${new Date().toISOString().split("T")[0]}.csv`,u.click(),window.URL.revokeObjectURL(i),c.success("Inventory data exported")},Ne=t=>{C(r=>r.includes(t)?r.filter(n=>n!==t):[...r,t])},Q=()=>{x.length===(s==null?void 0:s.length)?C([]):C((s==null?void 0:s.map(t=>t._id))||[])},we=t=>{B(t),U(t.currentStock.toString()),H(""),A(!0)},ve=async()=>{if(!k||isNaN(k)||k<0){c.error("Please enter a valid stock level");return}if(!P.trim()){c.error("Please enter a reason for this adjustment");return}try{const r=parseInt(k)-o.currentStock;await g.post("/inventory/adjust",{productId:o.productId,adjustment:r,reason:P,reference:"Manual edit"}),c.success("Stock updated successfully"),A(!1),S()}catch(t){console.error("Error updating stock:",t),c.error("Failed to update stock")}},q=(t,r="add")=>{B(t),me(r),O(""),$(""),I(!0)},Se=async()=>{if(!y||isNaN(y)||y<=0){c.error("Please enter a valid quantity");return}if(!R.trim()){c.error("Please enter a reason for this adjustment");return}try{const t=h==="add"?parseInt(y):-parseInt(y);await g.post("/inventory/adjust",{productId:o.productId,adjustment:t,reason:R,reference:`Manual ${h}`}),c.success(`Stock ${h==="add"?"added":"removed"} successfully`),I(!1),S()}catch(t){console.error("Error adjusting stock:",t),c.error("Failed to adjust stock")}},K=async t=>{try{const r=await g.get(`/inventory/history/${t}`);ye(r.data.data||[]),V(!0)}catch(r){console.error("Error loading stock history:",r),c.error("Failed to load stock history")}},Ce=[{title:"Total Products",value:(a==null?void 0:a.totalProducts)||0,icon:p,color:"bg-blue-500",change:null},{title:"Inventory Value",value:`Rs.${((a==null?void 0:a.totalValue)||0).toLocaleString()}`,icon:te,color:"bg-green-500",change:null},{title:"Low Stock Items",value:(a==null?void 0:a.lowStockItems)||0,icon:M,color:"bg-orange-500",change:null},{title:"Out of Stock",value:(a==null?void 0:a.outOfStockItems)||0,icon:Ie,color:"bg-red-500",change:null}];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 dark:from-gray-900 dark:to-blue-900 p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white flex items-center",children:[e.jsx(p,{className:"w-8 h-8 mr-3 text-blue-600"}),"Inventory Management"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Monitor stock levels, track movements, and manage inventory"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:be,disabled:_,className:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition-colors flex items-center disabled:opacity-50",children:[e.jsx(se,{className:`w-4 h-4 mr-2 ${_?"animate-spin":""}`}),"Refresh"]}),e.jsxs("button",{onClick:()=>ue(!m),className:"bg-purple-500 text-white px-4 py-2 rounded-lg hover:bg-purple-600 transition-colors flex items-center",children:[e.jsx(Re,{className:"w-4 h-4 mr-2"}),"Bulk Actions"]}),e.jsxs("button",{onClick:()=>c.info("Add new product to inventory - coming soon"),className:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors flex items-center",children:[e.jsx(re,{className:"w-4 h-4 mr-2"}),"Add Product to Inventory"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:Ce.map((t,r)=>{const n=t.icon;return e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:t.title}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-2",children:t.value})]}),e.jsx("div",{className:`${t.color} p-3 rounded-xl`,children:e.jsx(n,{className:"w-6 h-6 text-white"})})]})},r)})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Recent Stock Movements"}),((X=a==null?void 0:a.recentMovements)==null?void 0:X.length)>0?e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:(Y=a==null?void 0:a.recentMovements)==null?void 0:Y.map((t,r)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[je(t.type),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white text-sm",children:t.productName}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:t.type.replace("_"," ").toUpperCase()})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-semibold text-gray-900 dark:text-white",children:[t.type.includes("increase")||t.type==="purchase"||t.type==="transfer_in"?"+":"-",t.quantity]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(t.timestamp).toLocaleTimeString()})]})]},r))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(p,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No recent movements"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Top Products by Value"}),((G=a==null?void 0:a.topProducts)==null?void 0:G.length)>0?e.jsx(Ae,{width:"100%",height:250,children:e.jsxs(Pe,{data:(a==null?void 0:a.topProducts)||[],children:[e.jsx(Le,{strokeDasharray:"3 3"}),e.jsx(Me,{dataKey:"productName",tick:{fontSize:12},angle:-45,textAnchor:"end",height:60}),e.jsx(Ee,{tick:{fontSize:12}}),e.jsx(_e,{formatter:t=>[`Rs.${t.toLocaleString()}`,"Value"],labelStyle:{color:"#374151"}}),e.jsx(Fe,{dataKey:"value",fill:"#3B82F6",radius:[4,4,0,0]})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(te,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No data available"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 mb-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[e.jsx("div",{className:"flex-1 max-w-md",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search products...",value:N,onChange:t=>de(t.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"}),e.jsx(Be,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"})]})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("select",{value:w,onChange:t=>ne(t.target.value),className:"border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"good",children:"In Stock"}),e.jsx("option",{value:"low_stock",children:"Low Stock"}),e.jsx("option",{value:"out_of_stock",children:"Out of Stock"})]}),e.jsxs("button",{onClick:()=>L("export"),className:"bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition-colors flex items-center",children:[e.jsx(Oe,{className:"w-4 h-4 mr-2"}),"Export"]})]})]}),m&&e.jsx("div",{className:"mt-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:Q,className:"text-blue-500 hover:text-blue-700 transition-colors text-sm",children:x.length===(s==null?void 0:s.length)?"Deselect All":"Select All"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[x.length," items selected"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>L("export"),disabled:x.length===0,className:"bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600 transition-colors disabled:opacity-50",children:"Export Selected"}),e.jsx("button",{onClick:()=>L("update_reorder"),disabled:x.length===0,className:"bg-orange-500 text-white px-3 py-1 rounded text-sm hover:bg-orange-600 transition-colors disabled:opacity-50",children:"Update Reorder Points"})]})]})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[m&&e.jsx("th",{className:"px-6 py-3 text-left",children:e.jsx("input",{type:"checkbox",checked:x.length===(s==null?void 0:s.length)&&(s==null?void 0:s.length)>0,onChange:Q,className:"rounded border-gray-300"})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Product"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Current Stock"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Price"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Last Modified"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:ie?e.jsx("tr",{children:e.jsx("td",{colSpan:m?8:7,className:"px-6 py-8 text-center",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mr-2"}),"Loading inventory..."]})})}):(s==null?void 0:s.length)===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:m?8:7,className:"px-6 py-8 text-center",children:[e.jsx(p,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No inventory data found"})]})}):s==null?void 0:s.map(t=>{var u,d,b,j,f,Z,ee;const r=z(t),n=r.icon,i=((u=t.productDetails)==null?void 0:u.sellingPrice)||0;return e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[m&&e.jsx("td",{className:"px-6 py-4",children:e.jsx("input",{type:"checkbox",checked:x.includes(t._id),onChange:()=>Ne(t._id),className:"rounded border-gray-300"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:(j=(b=(d=t.productDetails)==null?void 0:d.images)==null?void 0:b[0])!=null&&j.url?e.jsx("img",{className:"h-10 w-10 rounded-lg object-cover",src:t.productDetails.images[0].url,alt:t.productDetails.productName}):e.jsx("div",{className:"h-10 w-10 bg-gray-100 dark:bg-gray-600 rounded-lg flex items-center justify-center",children:e.jsx(p,{className:"h-5 w-5 text-gray-400"})})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:((f=t.productDetails)==null?void 0:f.productName)||"Unknown Product"}),e.jsx("button",{onClick:()=>K(t.productId),className:"text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 transition-colors",title:"View Stock History",children:e.jsx(ae,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:((Z=t.productDetails)==null?void 0:Z.barcode)||"No barcode"})]})]})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[t.currentStock," ",((ee=t.productDetails)==null?void 0:ee.unit)||"pcs"]}),t.reservedStock>0&&e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Reserved: ",t.reservedStock]})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${r.color}`,children:[e.jsx(n,{className:"w-3 h-3 mr-1"}),r.status]})}),e.jsxs("td",{className:"px-6 py-4 text-sm font-medium text-gray-900 dark:text-white",children:["Rs.",i.toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 dark:text-gray-400",children:t.updatedAt?new Date(t.updatedAt).toLocaleString():"Never"}),e.jsx("td",{className:"px-6 py-4 text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx("button",{onClick:()=>K(t.productId),className:"text-blue-600 hover:text-blue-900 transition-colors",title:"View Stock History",children:e.jsx(ae,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>q(t,"add"),className:"text-green-600 hover:text-green-900 transition-colors",title:"Add Stock",children:e.jsx(re,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>q(t,"remove"),className:"text-orange-600 hover:text-orange-900 transition-colors",title:"Remove Stock",children:e.jsx($e,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>we(t),className:"text-purple-600 hover:text-purple-900 transition-colors",title:"Edit Inventory",children:e.jsx(Ve,{className:"w-4 h-4"})})]})})]},t._id)})})]})})}),ge&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-96 max-w-md mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:h==="add"?"Add Stock":"Remove Stock"}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Product: ",(J=o==null?void 0:o.productDetails)==null?void 0:J.productName]}),e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Current Stock: ",o==null?void 0:o.currentStock]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Quantity"}),e.jsx("input",{type:"number",value:y,onChange:t=>O(t.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter quantity",min:"1"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Reason"}),e.jsx("textarea",{value:R,onChange:t=>$(t.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter reason for this adjustment",rows:"3"})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>I(!1),className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:Se,className:`px-4 py-2 text-white rounded-md transition-colors ${h==="add"?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700"}`,children:h==="add"?"Add Stock":"Remove Stock"})]})]})}),he&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-4/5 max-w-4xl mx-4 max-h-[80vh] overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Stock History"}),e.jsx("button",{onClick:()=>V(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:"✕"})]}),e.jsxs("div",{className:"overflow-y-auto max-h-96",children:[e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700 sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-gray-600 dark:text-gray-300",children:"Date"}),e.jsx("th",{className:"px-4 py-2 text-left text-gray-600 dark:text-gray-300",children:"Type"}),e.jsx("th",{className:"px-4 py-2 text-left text-gray-600 dark:text-gray-300",children:"Quantity"}),e.jsx("th",{className:"px-4 py-2 text-left text-gray-600 dark:text-gray-300",children:"Reason"}),e.jsx("th",{className:"px-4 py-2 text-left text-gray-600 dark:text-gray-300",children:"Notes"})]})}),e.jsx("tbody",{children:T.map((t,r)=>{var n,i,u;return e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-600",children:[e.jsx("td",{className:"px-4 py-2 text-gray-900 dark:text-white",children:new Date(t.timestamp).toLocaleString()}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${t.type==="adjustment"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":t.type==="sale"?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}`,children:t.type})}),e.jsxs("td",{className:`px-4 py-2 font-medium flex items-center ${(n=t.notes)!=null&&n.toLowerCase().includes("added")?"text-green-600 dark:text-green-400":(i=t.notes)!=null&&i.toLowerCase().includes("removed")?"text-red-600 dark:text-red-400":"text-gray-600 dark:text-gray-300"}`,children:[(u=t.notes)!=null&&u.toLowerCase().includes("added")?"+":"-",t.quantity]}),e.jsx("td",{className:"px-4 py-2 text-gray-700 dark:text-gray-300",children:t.reason}),e.jsx("td",{className:"px-4 py-2 text-gray-700 dark:text-gray-300",children:t.notes})]},r)})})]}),T.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No stock movements found"})]})]})}),pe&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-96 max-w-md mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Edit Stock Level"}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Product: ",(W=o==null?void 0:o.productDetails)==null?void 0:W.productName]}),e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Current Stock: ",o==null?void 0:o.currentStock]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"New Stock Level"}),e.jsx("input",{type:"number",value:k,onChange:t=>U(t.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter new stock level",min:"0"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Reason for Change"}),e.jsx("textarea",{value:P,onChange:t=>H(t.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter reason for this stock change",rows:"3"})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>A(!1),className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:ve,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Update Stock"})]})]})})]})};export{Xe as default};
